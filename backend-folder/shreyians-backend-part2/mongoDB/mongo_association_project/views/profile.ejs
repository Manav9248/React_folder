<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div class="w-full min-h-screen bg-zinc-900 text-white">

        <div class="flex justify-end w-full p-2">
            <a class="bg-red-500 rounded-md px-3 py-2 text-[0.8rem] mb-5 font-medium inline-block duration-90 hover:scale-[103%] hover:bg-red-600" href="/logout">Logout</a>
        </div>


      <h3
        class="text-center text-3xl font-semibold underline decoration-yellow-400"
      >
        Hello, <%=profileUser.name%>
      </h3>

      <h5 class="mb-3 ml-5 font-base text-[1.2rem]">You can create a new post</h5>

      <form action="/post"
      method="post">
        <textarea name="content" class="resize-none bg-transparent border-2 ml-4 border-zinc-800 rounded-md w-1/3 p-3 outline-none block"
        placeholder="What's on your mind ?"></textarea>

        <input class="px-3 py-2 bg-blue-500 block rounded-md mt-2 w-40 ml-5  hover:bg-blue-700" type="submit">
      </form>

      <div class="posts mt-20 ml-4">
        <h3 class="text-xl text-zinc-400">Your posts.</h3>

        <div class="psotcontainer mt-5 flex flex-wrap">

    <% profileUser.posts.reverse().forEach((post)=>{ %>

        <div class="post w-1/3 p-4 border-[1px] m-2 rounded-md border-zinc-700 bg-zinc-800">
  <h4 class="text-blue-500 mb-2 ">
     <%=profileUser.username%>
    </h4>
  <p class="text-sm tracking-tight"> <%= post.content %> </p>

  
    <small class="mt-1  inline-block"> <%= post.likes.length %> likes</small>

    <div class="btns flex gap-4  mt-4">

      <a class="text-blue-500 hover:text-blue-600 duration-90 hover:scale-[103%]" href="/like/<%=post._id %>"><%=post.likes.indexOf(profileUser._id)=== -1 ? "Like" : "Unlike" %></a>
    
      <a class="text-zinc-400 hover:text-zinc-500 duration-90 hover:scale-[103%]" href="/edit/<%=post._id%>">Edit</a>

      <a class="text-red-700 hover:text-red-800 text-[1rem] duration-90 hover:scale-[103%]" href="/delete/<%=post._id%>">Delete</a>
            </div>
    
          </div>

   <% }) %>

  
        </div>
      </div>


    </div>
  </body>
</html>
